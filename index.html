<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E1C åº§ä½å°èª¿ç³»çµ±</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background: #f4f7f6; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .toolbar { margin-bottom: 20px; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: flex; gap: 10px; }
        
        button { padding: 10px 15px; cursor: pointer; border: none; border-radius: 5px; font-weight: bold; transition: 0.3s; }
        .btn-random { background: #28a745; color: white; }
        .btn-reset { background: #dc3545; color: white; }
        button:hover { opacity: 0.8; }

        .classroom-container { background: #fff; padding: 40px; border: 3px solid #333; position: relative; }
        
        /* é–€åœ¨å·¦ä¸Šè§’ */
        .top-door { position: absolute; top: -3px; left: 20px; border: 3px solid #333; border-top: none; padding: 5px 15px; background: #fff; font-weight: bold; }

        .classroom { 
            display: grid; grid-template-columns: repeat(8, 110px); gap: 8px; 
        }
        
        .seat { 
            border: 1px solid #333; height: 95px; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; background: #fff; cursor: pointer;
            transition: all 0.2s; position: relative;
        }
        .seat:hover { background: #f0f7ff; border-color: #007bff; z-index: 1; }
        
        .seat-num { position: absolute; top: 2px; left: 2px; font-size: 10px; color: #999; }
        .name { font-weight: bold; font-size: 15px; margin-top: 5px; }
        .std-id { font-size: 10px; color: #888; }
        .en-name { font-size: 11px; color: #666; }

        /* åº•éƒ¨å€åŸŸä½ˆç½® */
        .bottom-area { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-top: 25px; width: 100%; 
        }
        .blackboard { flex-grow: 1; text-align: center; font-size: 20px; font-weight: bold; letter-spacing: 15px; border-top: 4px solid #333; padding-top: 10px; margin: 0 50px; }
        .computer { border: 2px dashed #333; padding: 10px; font-size: 12px; font-weight: bold; }
        .bottom-door { border: 3px solid #333; padding: 5px 15px; font-weight: bold; visibility: hidden; } /* ä¿æŒå°ç¨±ç”¨ï¼Œéš±è— */
    </style>
</head>
<body>

    <h2>ğŸ« E1C éš¨æ©Ÿæ’åº§ (å°èª¿æ¨¡å¼)</h2>
    <p style="color: #666;">ğŸ’¡ é»æ“Šä»»ä½•åº§ä½è¼¸å…¥å§“å/å­¸è™Ÿï¼Œè©²ç”Ÿå°‡èˆ‡åŸä½åŒå­¸ã€Œç›´æ¥å°èª¿ã€</p>

    <div class="toolbar">
        <button class="btn-random" onclick="fillRandom()">ğŸ² å…¨é«”é‡æ–°éš¨æ©Ÿæ’åˆ—</button>
        <button class="btn-reset" onclick="resetAll()">ğŸ§¹ æ¸…ç©ºé‡è¨­</button>
    </div>

    <div class="classroom-container">
        <div class="top-door">DOOR</div>
        <div class="classroom" id="grid"></div>
        <div class="bottom-area">
            <div style="border: 3px solid #333; padding: 5px 15px; font-weight: bold;">DOOR</div>
            <div class="blackboard">BLACKBOARD</div>
            <div class="computer">COMPUTER</div>
        </div>
    </div>

    <script>
        const allStudents = [
            {id:"1114300121", n:"é¾”æ˜±ç‘„", e:"Kelly"}, {id:"1114300122", n:"ä½™æ²›å®¹", e:"Melody"}, {id:"1114300123", n:"é™³æ¹˜ç”¯", e:"Ariel"}, {id:"1114300124", n:"æ—æ²æ¦†", e:"Amber"}, {id:"1114300125", n:"è•­ç¾½å½¤", e:"Amelia"}, {id:"1114300126", n:"æ—å¥•å¸†", e:"Ivan"}, {id:"1114300127", n:"é™³ä¹™ç‘„", e:"Sharon"}, {id:"1114300128", n:"ç‹æ¼†å¦¤", e:"Zoie"}, {id:"1114300129", n:"é™³éœå®œ", e:"Luna"}, {id:"1114300130", n:"é™³ç¥‰æ©", e:"Bianca"}, {id:"1114300131", n:"é™³åˆç‘„", e:"Christy"}, {id:"1114300132", n:"è³´å®¥ç’‡", e:"Alina"}, {id:"1114300133", n:"é™³çŸæ…ˆ", e:"Emily"}, {id:"1114300134", n:"æ±ŸèŠ¯èª", e:"Ina"}, {id:"1114300135", n:"é™³ä¸–è±ª", e:"Howard"}, {id:"1114300136", n:"æ›¾å®‰å²‘", e:"Ann"}, {id:"1114300137", n:"è³´ç‘¾å®‰", e:"Ashley"}, {id:"1114300138", n:"ç¾…å‡±çˆ¾", e:"Mikayeel"}, {id:"1114300139", n:"è¾›ä¿Šæ–‡", e:"Jun-wen"}, {id:"1114300140", n:"é»ƒé–æ™", e:"Amber"}, {id:"1114300141", n:"æ—ç´«é¨", e:"Nancy"}, {id:"1114300142", n:"å³éœˆç‘œ", e:"Yuri"}, {id:"1114300143", n:"è¨±å”¯èŠ¯", e:"Una"}, {id:"1114300144", n:"æ¸¸èŠ¯èª", e:"Abby"}, {id:"1114300145", n:"ææ˜“æ˜Œ", e:"Jason"}, {id:"1114300146", n:"æå©•ç¦•", e:"Eve"}, {id:"1114300147", n:"ææ©å¦®", e:"Miu Miu"}, {id:"1114300148", n:"æ—é‡‘å§µ", e:"Linda"}, {id:"1114300149", n:"é™³å¯ç´œ", e:"Amber"}, {id:"1114300151", n:"å¼µé›…çŸ", e:"Judy"}, {id:"1114300152", n:"ç‰›æ˜±ç¿”", e:"Sean"}, {id:"1114300153", n:"é™³ä»¥å©•", e:"Emma"}, {id:"1114300154", n:"å¼µéˆºå©•", e:"Wendy"}, {id:"1114300155", n:"æœ±é›¯èŠ³", e:"Mia"}, {id:"1114300156", n:"é€£å­ç”¯", e:"Liliya"}, {id:"1114300157", n:"æ¥ŠèŠ·èŠ¹", e:"Alex"}, {id:"1114300158", n:"é™³ç¦æ¶µ", e:"Hannah"}, {id:"1114300159", n:"é™³å† å®‡", e:"Benson"}, {id:"1114300160", n:"é™³æ¼¢åº­", e:"Lina"}, {id:"1114300161", n:"å¼µä¹™èŠ¹", e:"Irene"}, {id:"1114300162", n:"ç‹å¦è»", e:"Grace"}, {id:"1114300163", n:"æ›²å­å¯¬", e:"Miller"}, {id:"1114300164", n:"ç‹ä»¥å€«", e:"Juan Jose"}, {id:"1114300165", n:"è¶™äºå«»", e:"Abby"}, {id:"1114300166", n:"æ—å®œæ¨º", e:"Novalie"}, {id:"1114300167", n:"æŸ¯å“ç‘€", e:"Pamela"}, {id:"1114300168", n:"å“å½¥å‡", e:"Cynthia"}, {id:"1114300169", n:"éŠæ¢å¥é›…", e:"Luna"}, {id:"1114300170", n:"å¼µå­ç‘œ", e:"Yvonne"}, {id:"1114300171", n:"å¼µæ¹˜ç¿Š", e:"Cecelia"}, {id:"1114300172", n:"å»–éšè–‡", e:"Nicole"}, {id:"1114300173", n:"é»ƒæ¯“éœ", e:"Lily"}, {id:"1114300174", n:"è”¡æ‚…ç³", e:"Lina"}, {id:"1114300175", n:"é™³å®¥å‰", e:"Iris"}, {id:"1114300501", n:"è³ˆä¼¯ç", e:"Haein"}, {id:"1114300502", n:"é„­çš“è»’", e:"Suppakarn"}
        ];

        let seatMap = [...allStudents]; // åˆå§‹ç›´æ¥å¡«æ»¿åå–®

        function initGrid() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            for (let i = 0; i < 56; i++) {
                const row = 7 - Math.floor(i / 8);
                const col = (i % 8) + 1;
                const student = seatMap[i];
                
                const seatDiv = document.createElement('div');
                seatDiv.className = 'seat';
                seatDiv.onclick = () => swapStudent(i);
                
                seatDiv.innerHTML = `
                    <div class="seat-num">${col}-${row}</div>
                    <div class="std-id">${student ? student.id : ''}</div>
                    <div class="name">${student ? student.n : ''}</div>
                    <div class="en-name">${student ? student.e : ''}</div>
                `;
                grid.appendChild(seatDiv);
            }
        }

        function swapStudent(targetIdx) {
            const query = prompt("è«‹è¼¸å…¥è¦æ›åˆ°æ­¤åº§ä½çš„åŒå­¸(å§“åæˆ–æœ«ä¸‰ç¢¼)ï¼š");
            if (!query) return;

            const targetStudent = allStudents.find(s => s.n.includes(query) || s.id.endsWith(query));
            if (!targetStudent) {
                alert("æ‰¾ä¸åˆ°é€™ä½åŒå­¸ï¼");
                return;
            }

            // æ‰¾åˆ°è©²åŒå­¸ç›®å‰åå“ª
            const currentIdx = seatMap.findIndex(s => s && s.id === targetStudent.id);
            
            if (currentIdx !== -1) {
                // åŸ·è¡Œå°èª¿ï¼šè¦æŠŠ targetIdx çš„äººæ›å» currentIdxï¼ŒæŠŠ targetStudent æ›åˆ° targetIdx
                const temp = seatMap[targetIdx];
                seatMap[targetIdx] = seatMap[currentIdx];
                seatMap[currentIdx] = temp;
                initGrid();
            }
        }

        function fillRandom() {
            seatMap.sort(() => Math.random() - 0.5);
            initGrid();
        }

        function resetAll() {
            if(confirm("ç¢ºå®šè¦é‡è¨­ç‚ºåˆå§‹åå–®é †åºå—ï¼Ÿ")) {
                seatMap = [...allStudents];
                initGrid();
            }
        }

        // é é¢åŠ è¼‰æ™‚å…ˆéš¨æ©Ÿæ’ä¸€æ¬¡
        fillRandom();
    </script>
</body>
</html>
