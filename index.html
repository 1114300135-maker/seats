<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>E1C è¡Œå‹•é»åç°¿</title>
    <style>
        :root {
            --present-bg: #d4edda; --present-text: #155724;
            --absent-bg: #f8d7da; --absent-text: #721c24;
            --normal-bg: #ffffff;
        }
        body { font-family: -apple-system, system-ui, sans-serif; background: #f0f2f5; margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; }
        
        .header { position: sticky; top: 10px; z-index: 100; width: 100%; max-width: 500px; background: #343a40; color: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); margin-bottom: 20px; text-align: center; }
        .stats { display: flex; justify-content: space-around; margin-top: 10px; font-size: 14px; }
        .stats span { font-weight: bold; font-size: 18px; color: #ffc107; }

        .btn-group { display: flex; gap: 10px; width: 100%; max-width: 500px; margin-bottom: 20px; }
        button { flex: 1; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; }
        .btn-reset { background: #6c757d; }
        .btn-all-p { background: #28a745; }

        .student-list { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 8px; }
        .student-card { 
            display: flex; align-items: center; justify-content: space-between;
            padding: 15px; background: var(--normal-bg); border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: 0.2s; border: 1px solid #ddd;
        }
        .student-info { display: flex; flex-direction: column; }
        .student-id { font-size: 12px; color: #888; margin-bottom: 2px; }
        .student-name { font-size: 18px; font-weight: bold; }
        
        /* ç‹€æ…‹é¡è‰² */
        .student-card.present { background: var(--present-bg); color: var(--present-text); border-color: #c3e6cb; }
        .student-card.absent { background: var(--absent-bg); color: var(--absent-text); border-color: #f5c6cb; }
        
        .status-label { font-size: 12px; font-weight: bold; padding: 4px 8px; border-radius: 5px; background: #eee; color: #666; }
        .present .status-label { background: #28a745; color: white; }
        .absent .status-label { background: #dc3545; color: white; }
    </style>
</head>
<body>

    <div class="header">
        <div style="font-size: 18px; font-weight: bold;">ğŸ« E1C ç­ç´šé»åç³»çµ±</div>
        <div class="stats">
            <div>æ‡‰åˆ°: <span>56</span></div>
            <div>å¯¦åˆ°: <span id="pCount">0</span></div>
            <div>ç¼ºå¸­: <span id="aCount">0</span></div>
        </div>
    </div>

    <div class="btn-group">
        <button class="btn-all-p" onclick="markAllPresent()">âœ… å…¨é«”è¨­ç‚ºå‡ºå¸­</button>
        <button class="btn-reset" onclick="resetRoll()">ğŸ§¹ é‡ç½®ç‹€æ…‹</button>
    </div>

    <div class="student-list" id="list"></div>

    <script>
        const students = [
            {id:"1114300121", n:"é¾”æ˜±ç‘„"}, {id:"1114300122", n:"ä½™æ²›å®¹"}, {id:"1114300123", n:"é™³æ¹˜ç”¯"}, {id:"1114300124", n:"æ—æ²æ¦†"}, {id:"1114300125", n:"è•­ç¾½å½¤"}, {id:"1114300126", n:"æ—å¥•å¸†"}, {id:"1114300127", n:"é™³ä¹™ç‘„"}, {id:"1114300128", n:"ç‹æ¼†å¦¤"}, {id:"1114300129", n:"é™³éœå®œ"}, {id:"1114300130", n:"é™³ç¥‰æ©"}, {id:"1114300131", n:"é™³åˆç‘„"}, {id:"1114300132", n:"è³´å®¥ç’‡"}, {id:"1114300133", n:"é™³çŸæ…ˆ"}, {id:"1114300134", n:"æ±ŸèŠ¯èª"}, {id:"1114300135", n:"é™³ä¸–è±ª"}, {id:"1114300136", n:"æ›¾å®‰å²‘"}, {id:"1114300137", n:"è³´ç‘¾å®‰"}, {id:"1114300138", n:"ç¾…å‡±çˆ¾"}, {id:"1114300139", n:"è¾›ä¿Šæ–‡"}, {id:"1114300140", n:"é»ƒé–æ™"}, {id:"1114300141", n:"æ—ç´«é¨"}, {id:"1114300142", n:"å³éœˆç‘œ"}, {id:"1114300143", n:"è¨±å”¯èŠ¯"}, {id:"1114300144", n:"éŠèŠ¯èª"}, {id:"1114300145", n:"ææ˜“æ˜Œ"}, {id:"1114300146", n:"æå©•ç¦•"}, {id:"1114300147", n:"ææ©å¦®"}, {id:"1114300148", n:"æ—é‡‘å§µ"}, {id:"1114300149", n:"é™³å¯ç´œ"}, {id:"1114300151", n:"å¼µé›…çŸ"}, {id:"1114300152", n:"ç‰›æ˜±ç¿”"}, {id:"1114300153", n:"é™³ä»¥å©•"}, {id:"1114300154", n:"å¼µéˆºå©•"}, {id:"1114300155", n:"æœ±é›¯èŠ³"}, {id:"1114300156", n:"é€£å­ç”¯"}, {id:"1114300157", n:"æ¥ŠèŠ·èŠ¹"}, {id:"1114300158", n:"é™³ç¦æ¶µ"}, {id:"1114300159", n:"é™³å† å®‡"}, {id:"1114300160", n:"é™³æ¼¢åº­"}, {id:"1114300161", n:"å¼µä¹™èŠ¹"}, {id:"1114300162", n:"ç‹å¦è»"}, {id:"1114300163", n:"æ›²å­å¯¬"}, {id:"1114300164", n:"ç‹ä»¥å€«"}, {id:"1114300165", n:"è¶™äºå«»"}, {id:"1114300166", n:"æ—å®œæ¨º"}, {id:"1114300167", n:"æŸ¯å“ç‘€"}, {id:"1114300168", n:"å“å½¥å‡"}, {id:"1114300169", n:"éŠæ¢å¥é›…"}, {id:"1114300170", n:"å¼µå­ç‘œ"}, {id:"1114300171", n:"å¼µæ¹˜ç¿Š"}, {id:"1114300172", n:"å»–éšè–‡"}, {id:"1114300173", n:"é»ƒæ¯“éœ"}, {id:"1114300174", n:"è”¡æ‚…ç³"}, {id:"1114300175", n:"é™³å®¥å‰"}, {id:"1114300501", n:"è³ˆä¼¯ç"}, {id:"1114300502", n:"é„­çš“è»’"}
        ];

        // è®€å–å­˜æª”ç‹€æ…‹ï¼Œè‹¥ç„¡å‰‡é è¨­ç‚ºæœªçŸ¥ (u)
        let rollStatus = JSON.parse(localStorage.getItem('e1c_roll_call')) || students.map(s => ({id: s.id, st: 'u'}));

        function render() {
            const list = document.getElementById('list');
            list.innerHTML = '';
            let p = 0, a = 0;

            students.forEach((s, i) => {
                const status = rollStatus[i].st;
                const card = document.createElement('div');
                card.className = `student-card ${status==='p'?'present':''} ${status==='a'?'absent':''}`;
                card.onclick = () => toggleStatus(i);
                
                let statusTxt = 'æœªæ¨™è¨˜';
                if(status==='p') { statusTxt = 'å‡ºå¸­'; p++; }
                if(status==='a') { statusTxt = 'ç¼ºå¸­'; a++; }

                card.innerHTML = `
                    <div class="student-info">
                        <span class="student-id">#${s.id.slice(-3)}</span>
                        <span class="student-name">${s.n}</span>
                    </div>
                    <div class="status-label">${statusTxt}</div>
                `;
                list.appendChild(card);
            });

            document.getElementById('pCount').innerText = p;
            document.getElementById('aCount').innerText = a;
            localStorage.setItem('e1c_roll_call', JSON.stringify(rollStatus));
        }

        function toggleStatus(i) {
            const cur = rollStatus[i].st;
            // å¾ªç’°åˆ‡æ›: æœªçŸ¥ -> å‡ºå¸­ -> ç¼ºå¸­ -> æœªçŸ¥
            rollStatus[i].st = cur === 'u' ? 'p' : (cur === 'p' ? 'a' : 'u');
            render();
        }

        function markAllPresent() {
            rollStatus = students.map(s => ({id: s.id, st: 'p'}));
            render();
        }

        function resetRoll() {
            if(confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é»åç´€éŒ„å—ï¼Ÿ')) {
                rollStatus = students.map(s => ({id: s.id, st: 'u'}));
                render();
            }
        }

        render();
    </script>
</body>
</html>
